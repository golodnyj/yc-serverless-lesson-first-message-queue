# Создание Триггера
# Создание Триггера-таймера

Теперь создайте триггер, который будет вызывать функцию обработки сообщений из очереди один раз в минуту. Он будет использовать крон выражение:

    yc serverless trigger create timer \
    --name trigger-for-mq \
    --invoke-function-name function-for-url-from-mq \
    --invoke-function-service-account-id $SERVICE_ACCOUNT_ID \
    --cron-expression '* * * * ? *'   

Cron-выражение * * * * ? * означает вызов функции `function-for-url-from-mq` один раз в минуту. Подробнее про Cron-выражения можно прочитать в [документации](https://cloud.yandex.ru/docs/functions/concepts/trigger/timer#cron-expression).  

Теперь у нас есть функция, которая раз в минуту будет пробовать взять из очереди url и проверять его. Также есть метод REST API, который позволяет записывать URL в очередь независимо от работы обработчика. Мы можем вызывать созданный метод как угодно часто. Очередь будет просто накапливаться, а затем обработчик будет постепенно её разбирать.

В итоге вы получили асинхронную систему проверки доступности url с доступом по REST API. Вы не создали ни одной виртуальной машины, но решили вопросы масштабирования и отказоустойчивости системы.

# Удаление Триггера-таймера

По завершении лабораторной работы не забудьте удалить, созданный нами триггер `trigger-for-mq` иначе он будет работать и работать:

    yc serverless trigger delete trigger-for-mq

Не забудьте удалить или остановить все созданные вами ресурсы: все ваши функции, триггеры, очереди YMQ и кластер базы данных.
